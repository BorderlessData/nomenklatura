<h2 class="page-header">{{dataset.label}}</h2>

<div class="row">
  <div class="col-xs-12 col-md-6">
      <p>
          A dataset has a set of named entities.
          Other forms such as different spelling and 
          synonyms are mapped to one of the
          entities as aliases or marked as invalid.
      </p>
      <p>
      <strong>Statistics:</strong>
          <strong>{{dataset.stats.num_entities}}</strong> Entities, 
          <strong>{{dataset.stats.num_aliases}}</strong> Aliases ({{dataset.stats.num_invalid}}
          marked invalid).
      </p>
      <div class="btn-group">
        <a nk-authz dataset="dataset" op="edit" class="btn btn-primary" href="/#/datasets/{{dataset.name}}/review/random">
          <i class="icon-check icon-white"></i> Reconcile ({{dataset.stats.num_unmatched}})</a>
        <a nk-authz dataset="dataset" op="manage" class="btn btn-default" ng-click="editDataset()">
          <i class="icon-cog"></i> Settings</a>
        <a nk-authz dataset="dataset" op="manage" class="btn btn-default" href="" disabled >
          <i class="icon-upload"></i> Import</a>
        <a class="btn btn-default" href="/api/2/entities?dataset={{dataset.name}}&format=csv&download=true">
            <i class="fa fa-download"></i> CSV
        </a>
      </div>
      <br>
          Aliases are added via the <a href="/#/about">API</a>, by matching names against this
          endpoint:
      </p>
      <pre><code>bla/lookup</code></pre>
      <p>
          An <a href="https://github.com/OpenRefine/OpenRefine">OpenRefine</a>
          reconciliation endpoint is available as well (read-only):
      </p>
      <pre><code>bla/reconcile</code></pre>
  </div>
  <div class="col-xs-12 col-md-6">
      <form class="form-horizontal" role="form">
          <div class="form-group">
              <input type="text" class="search-query form-control"
                  ng-model="query" ng-keyup="updateFilter()" placeholder="Find an entity">
          </div>
      </form>
      
      <table class="table table-striped table-condensed">
          <tr>
              <th width="90%">Name</th>
              <th>Aliases</th>
          </tr>
          <tr ng-repeat="entity in entities.results">
              <td><a href="/#/entities/{{entity.id}}">{{entity.name}}</a></td>
              <td>{{entity.num_aliases}}</td>
          </tr>
          <tr nk-authz dataset="dataset" op="edit">
            <td>
              <form class="form-horizontal" name="newEntity" role="form">
              <div class="form-group col-xs-11" ng-class="{'has-error': newEntity.name.$invalid}">
                <input type="text" class="form-control" ng-model="new_entity.name"
                  placeholder="Add an entity..." name="name">
                <p class="help-block" ng-show="newEntity.name.$invalid"
                  ng-bind="newEntity.name.$message"></p>
              </div>
              </form>
            </td>
            <td>
              <button class="btn btn-small btn-primary" ng-click="createEntity(newEntity)">add</button>
            </td>
          </tr>
      </table>
      <nk-pager response="entities" load="loadEntities(url)"></odis-pager>
  </div>
</div>
